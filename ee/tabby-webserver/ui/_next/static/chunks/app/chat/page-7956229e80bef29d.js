(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929],{78627:function(e,t,n){Promise.resolve().then(n.bind(n,7931))},7931:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var s=n(36164),r=n(3546),o=n(42891),i=n.n(o),a=n(11978),l=n(23342),c=n(47190),d=n.n(c),u=n(42450),m=n(64148),h=n(93668),p=n(18452),f=n(74248),g=n(31458),x=n(81565),v=n(62817),y=n(73033);n(2596);let w=e=>d()(e).hsl().toString().replace(/hsla?\(/,"").replace(")","").split(",").slice(0,3).map((e,t)=>0===t?parseFloat(e).toFixed(1):e).join(""),b=["vscode"],j=["vscode"];function E(){let[e,t]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[E,S]=(0,r.useState)([]),[C,k]=(0,r.useState)(!1),[N,K]=(0,r.useState)(null),[I,M]=(0,r.useState)(!1),A=(0,r.useRef)(null),z=(0,a.useSearchParams)(),T=z.get("client")||void 0,_=z.get("font-size")||void 0,F=z.get("foreground")?"#".concat(z.get("foreground")):void 0,L=z.get("background")?"#".concat(z.get("background")):void 0,R="vscode"===T,W="intellij"===T,O=b.includes(T||""),P=j.includes(T||"");(0,r.useEffect)(()=>{let e=e=>{let{data:t}=e;if(t.style){let e=t.style.split(";").filter(e=>e).map(e=>{let[t,n]=e.split(":"),s=n.trim(),r=s.startsWith("#")||s.startsWith("rgb");if(!r)return"".concat(t,": ").concat(n);let o=w(s);return"".concat(t,": ").concat(o)}).join(";");document.documentElement.style.cssText=e,k(!0)}t.themeClass&&(document.documentElement.className=t.themeClass)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,r.useEffect)(()=>{if(!R)return;let e=e=>{(e.ctrlKey||e.metaKey)&&"KeyC"===e.code?document.execCommand("copy"):(e.ctrlKey||e.metaKey)&&"KeyX"===e.code?document.execCommand("cut"):(e.ctrlKey||e.metaKey)&&"KeyV"===e.code?document.execCommand("paste"):(e.ctrlKey||e.metaKey)&&"KeyA"===e.code&&document.execCommand("selectAll")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let Z=e=>{if(A.current)A.current.sendUserChat(e);else{let t=[...E];t.push(e),S(t)}},B=(0,p.H)({init:e=>{A.current||(d((0,f.x0)()),t(!0),o(e.fetcherOptions))},sendMessage:e=>Z(e),showError:e=>{K(e)},cleanError:()=>{K(null)}}),H=async()=>{M(!0),await (null==B?void 0:B.refresh()),M(!1)},U=async e=>{var t;return null==B?void 0:null===(t=B.onSubmitMessage)||void 0===t?void 0:t.call(B,e)},V=async e=>{var t;return null==B?void 0:null===(t=B.onApplyInEditor)||void 0===t?void 0:t.call(B,e)};function J(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"h-screen w-screen",style:{fontSize:C?"inherit":_,color:C?"inherit":F,background:C?"inherit":L,padding:W?"20px":"5px 18px"},children:[(0,s.jsxs)("div",{className:"flex items-center",style:{marginBottom:"0.55em"},children:[(0,s.jsx)(i(),{src:l.Z,alt:"logo",className:"rounded-full",style:{background:"rgb(232, 226, 210)",marginRight:"0.375em",padding:"0.15em"},width:18}),(0,s.jsx)("p",{className:"font-semibold",children:"Tabby"})]}),t]})}if(N)return(0,s.jsx)(J,{children:(0,s.jsxs)(s.Fragment,{children:[N.title&&(0,s.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:N.title}),(0,s.jsx)(y.s,{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[m.Z,h.Z],children:N.content}),(0,s.jsxs)(g.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:H,children:[I&&(0,s.jsx)(x.IconSpinner,{}),"Refresh"]})]})});if(!e||!n)return(0,s.jsx)(J,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"opacity-80",children:"Welcome to Tabby Chat! Just a moment while we get things ready..."}),(0,s.jsx)(x.IconSpinner,{className:"mx-auto",style:{marginTop:"1.25em",width:"0.875em",height:"0.875em"}})]})});let X={Authorization:"Bearer ".concat(n.authorization)};return(0,s.jsx)(u.SV,{FallbackComponent:function(e){let{error:t}=e;return(0,s.jsxs)(J,{children:[(0,s.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:"Something went wrong"}),(0,s.jsx)("p",{children:t.message}),(0,s.jsxs)(g.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:H,children:[I&&(0,s.jsx)(x.IconSpinner,{}),"Refresh"]})]})},children:(0,s.jsx)(v.e,{chatId:c,ref:A,headers:X,onThreadUpdates:()=>{},onNavigateToContext:(e,t)=>{null==B||B.navigate(e,t)},onLoaded:()=>{E.forEach(Z),S([])},maxWidth:R?"5xl":void 0,onCopyContent:"vscode"===T?e=>{parent.postMessage({action:"copy",data:e},"*")}:void 0,client:T,onSubmitMessage:O?U:void 0,onApplyInEditor:P?V:void 0},c)})}},2596:function(){},18452:function(e,t,n){"use strict";n.d(t,{m:function(){return i},H:function(){return a}});var s=n(3546),r=n(89704),o=n(95686);function i(e,t){let[n,o]=(0,s.useState)(null),i=!1;return(0,s.useEffect)(()=>{if(e.current&&!i){var n;i=!0,o((n=e.current,(0,r.K)(n,{expose:{navigate:t.navigate,refresh:t.refresh,onSubmitMessage:t.onSubmitMessage,onApplyInEditor:t.onApplyInEditor}})))}},[e.current]),n}function a(e){let[t,n]=(0,s.useState)(null),r=!1;return(0,s.useEffect)(()=>{let t=window.self!==window.top;t&&!r&&(r=!0,n((0,o.c)({expose:{init:e.init,sendMessage:e.sendMessage,showError:e.showError,cleanError:e.cleanError}})))},[]),t}}},function(e){e.O(0,[7998,5498,6312,7950,7980,259,2578,816,1492,4421,7590,1454,5621,4546,8746,9275,4373,5606,6193,4294,2459,9736,1565,3396,6775,3375,5289,1744],function(){return e(e.s=78627)}),_N_E=e.O()}]);