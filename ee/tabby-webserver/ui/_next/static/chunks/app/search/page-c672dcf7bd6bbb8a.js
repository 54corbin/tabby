(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797],{72845:function(e,t,n){Promise.resolve().then(n.bind(n,22985))},22985:function(e,t,n){"use strict";n.r(t),n.d(t,{Search:function(){return em},SearchContext:function(){return ed}});var s=n(36164),r=n(3546),a=n(42891),l=n.n(a),o=n(11978),i={src:"/_next/static/media/default-favicon.a2df8fbb.png",height:16,width:16,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABAElEQVR42mOAAqaMgrXeIYlL2jwjF7WZey7wBolB5eyZotNX1PdMO/Br466r/89dfvx/w7aLv6LSlteDFem5zPPesPXir20Hbv7ftPfGrz9///969urL/xkLj/0KjlvqzZCct6rt9r3X/w+cvP/r8fOP/0Hg/uN3vzbsvPq/rmVzG0Nk+oq2J8/f///89devOw/f/n/7/uv/T19+/Dpx7uH/3NK1bQwMarO8tu66/Auk89qd17/mrzn/682H7//3H7rxi4FhsheDDYMhU0DC0vqde6/+On/lyf/5q878X7Tq9M+E7JX1cJ/4MpgzMajO9ApNXtoWl7mszc5nvhdMEgB1uZJfA01kRAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},d=n(62226),c=n.n(d),u=n(6797),m=n.n(u),f=n(66686),h=n(56575),p=n(64148),x=n(93668),g=n(21808),v=n(93877),j=n(9010),b=n(16784),N=n(80605),y=n(74248),w=n(31458),C=n(90958),k=n(90615),S=n(81565),A=n(53538),I=n(57830),_=n(11208),R=n(3448),M=n(72657),E=n(68172),z=n(48537),T=n(30601),D=n(73033),L=n(94529),O=n(63743),P=n(52569),U=n(7449);n(2489);var Z=n(1853),$=n(94909),X=n(74630),H=n(82030),Y=n(80276),F=n.n(Y),V=n(40055),q=n(43240),B=n(18500),J=n(28312),G=n(44645),Q=n(25937),K=n(11634);let W=(0,q.BX)("\n  subscription CreateThreadAndRun($input: CreateThreadAndRunInput!) {\n    createThreadAndRun(input: $input) {\n      threadCreated\n      threadUserMessageCreated\n      threadAssistantMessageCreated\n      threadRelevantQuestions\n      threadAssistantMessageAttachmentsCode {\n        code {\n          gitUrl\n          filepath\n          language\n          content\n          startLine\n        }\n        scores {\n          rrf\n          bm25\n          embedding\n        }\n      }\n      threadAssistantMessageAttachmentsDoc {\n        doc {\n          title\n          link\n          content\n        }\n        score\n      }\n      threadAssistantMessageContentDelta\n      threadAssistantMessageCompleted\n    }\n  }\n"),ee=(0,q.BX)("\n  subscription CreateThreadRun($input: CreateThreadRunInput!) {\n    createThreadRun(input: $input) {\n      threadCreated\n      threadUserMessageCreated\n      threadAssistantMessageCreated\n      threadRelevantQuestions\n      threadAssistantMessageAttachmentsCode {\n        code {\n          gitUrl\n          filepath\n          language\n          content\n          startLine\n        }\n        scores {\n          rrf\n          bm25\n          embedding\n        }\n      }\n      threadAssistantMessageAttachmentsDoc {\n        doc {\n          title\n          link\n          content\n        }\n        score\n      }\n      threadAssistantMessageContentDelta\n      threadAssistantMessageCompleted\n    }\n  }\n"),et=(0,q.BX)("\n  mutation DeleteThreadMessagePair(\n    $threadId: ID!\n    $userMessageId: ID!\n    $assistantMessageId: ID!\n  ) {\n    deleteThreadMessagePair(\n      threadId: $threadId\n      userMessageId: $userMessageId\n      assistantMessageId: $assistantMessageId\n    )\n  }\n");var en=n(70410),es=n(29),er=n(80054),ea=n(90379);let el=(0,r.lazy)(()=>n.e(726).then(n.t.bind(n,80726,23))),eo=e=>{let{value:t,isFullScreen:n,onToggleFullScreen:a,onClose:l}=e,[o]=(0,v.m3)(),{theme:i}=(0,j.X)(),d=(0,r.useRef)(null);return((0,r.useEffect)(()=>{if(t){var e,n,s;null===(s=d.current)||void 0===s||null===(n=s.children)||void 0===n||null===(e=n[1])||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}},[t]),(null==o?void 0:o.value)&&open)?(0,s.jsxs)("div",{className:"flex h-full flex-col px-3 pt-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-end pb-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.z,{variant:"ghost",size:"icon",onClick:e=>a(!n),children:(0,s.jsx)(S.IconChevronDown,{className:(0,y.cn)("transition-all",n?"":"rotate-180")})}),(0,s.jsx)(w.z,{variant:"ghost",size:"icon",onClick:l,children:(0,s.jsx)(S.IconClose,{})})]})}),(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(ea.cg,{className:"p-2"}),children:t?(0,s.jsx)(I.ScrollArea,{className:"flex-1",ref:d,children:(0,s.jsx)(el,{theme:"dark"===i?"tomorrow":"rjv-default",src:t,style:{fontSize:"0.75rem"},collapseStringsAfterLength:120})}):null})]}):null};function ei(){return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R.O,{className:"w-full"}),(0,s.jsx)(R.O,{className:"w-[70%]"})]}),(0,s.jsx)(R.O,{className:"h-40 w-full"})]})}let ed=(0,r.createContext)({}),ec={compress:5.3,expand:6.3},eu=(0,q.BX)("\n  query ListThreadMessages(\n    $threadId: ID!\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    threadMessages(\n      threadId: $threadId\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          threadId\n          role\n          content\n          attachment {\n            code {\n              gitUrl\n              filepath\n              language\n              content\n              startLine\n            }\n            doc {\n              title\n              link\n              content\n            }\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n");function em(){var e,t,n,a;let{updateUrlComponents:l,pathname:i}=(0,G.Z)(),[d,c]=(0,r.useState)(),[u,m]=(0,r.useState)(!1),f=(0,N.xG)(),[p]=(0,v.Ot)(),[x,C]=(0,r.useState)([]),[k,R]=(0,r.useState)(!0),[z,D]=(0,r.useState)(!1),[$,X]=(0,r.useState)({}),[Y,q]=(0,r.useState)(""),[es,er]=(0,r.useState)(""),ea=(0,r.useRef)(null),[el,ec]=(0,r.useState)(!1),[em]=(0,T.Hb)(),ef=(0,o.useRouter)(),ep=(0,r.useRef)(!1),{theme:ex}=(0,j.X)(),[ev,ej]=(0,r.useState)(!1),[eb,eN]=(0,r.useState)(),ey=(0,r.useRef)(null),[ew,eC]=(0,r.useState)(45),ek=(0,r.useRef)(ew),eS=(0,r.useMemo)(()=>{var e,t;if(d)return null===(t=d.match(/^\/search\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop()},[d]),[{data:eA}]=(0,V.aM)({query:en.zz}),eI=null==eA?void 0:eA.repositoryList,[e_,eR]=(0,r.useState)(),[{data:eM,fetching:eE}]=(0,V.aM)({query:eu,variables:{threadId:eS,first:20,after:e_},pause:!eS||z});(0,r.useEffect)(()=>{var e,t;if(null==eM?void 0:null===(t=eM.threadMessages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=eM.threadMessages.edges.map(e=>e.node).slice();C(e),D(!0)}},[eM]);let ez=(e,t)=>{let n=x.findIndex(e=>e.id===Y),s=x.findIndex(e=>e.id===es);if(n>-1&&s>-1){let r=[...x];r[n].id=e,r[s].id=t,C(r)}},eT=e=>{var t;let n=null==x?void 0:null===(t=x[0])||void 0===t?void 0:t.content,s=F()(n,{lower:!0}).split("-").slice(0,8).join("-");s?document.title=s:document.title=n;let r=(0,Z.Z)([s,e]).join("-");l({pathname:"/search/".concat(r),searchParams:{del:["q"]}})},{sendUserMessage:eD,isLoading:eL,error:eO,answer:eP,stop:eU,regenerate:eZ}=function(e){let{threadId:t,headers:n,onAssistantMessageCompleted:s}=e,[a,l]=r.useState(t),o=r.useRef(),[i,d]=r.useState(!1),[c,u]=r.useState(),[m,f]=r.useState(),h=r.useMemo(()=>n?{fetchOptions:{headers:n}}:{},[n]),p=(e,t)=>{var n,s;return t?{...e,...(0,Q.Z)(t,e=>null!==e),threadAssistantMessageContentDelta:"".concat(null!==(n=null==e?void 0:e.threadAssistantMessageContentDelta)&&void 0!==n?n:"").concat(null!==(s=null==t?void 0:t.threadAssistantMessageContentDelta)&&void 0!==s?s:"")}:t},x=(0,b.d)(e=>{var t;null===(t=o.current)||void 0===t||t.call(o),o.current=void 0,d(!1),!e&&a&&(null==s||s(a,c))});r.useEffect(()=>{t&&t!==a&&l(t)},[t]);let g=(e,t)=>{let{unsubscribe:n}=K.L.subscription(W,{input:{thread:{userMessage:e},options:t}},h).subscribe(e=>{var t,s,r,o;if(null==e?void 0:e.error){d(!1),f(e.error),n();return}(null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(t=s.createThreadAndRun)||void 0===t?void 0:t.threadAssistantMessageCompleted)&&x.current();let i=null===(o=e.data)||void 0===o?void 0:null===(r=o.createThreadAndRun)||void 0===r?void 0:r.threadCreated;i&&i!==a&&l(i),u(t=>{var n;return p(t,null===(n=e.data)||void 0===n?void 0:n.createThreadAndRun)})});return n},v=(e,t)=>{if(!a)return;let{unsubscribe:n}=K.L.subscription(ee,{input:{threadId:a,additionalUserMessage:e,options:t}},h).subscribe(e=>{var t,s;if(null==e?void 0:e.error){d(!1),f(e.error),n();return}(null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(t=s.createThreadRun)||void 0===t?void 0:t.threadAssistantMessageCompleted)&&x.current(),u(t=>{var n;return p(t,null===(n=e.data)||void 0===n?void 0:n.createThreadRun)})});return n},j=(0,K.D)(et),N=(e,t)=>{i||(d(!0),f(void 0),u(void 0),a?o.current=v(e,t):o.current=g(e,t))};return{isLoading:i,answer:c,error:m,setError:f,sendUserMessage:N,stop:x.current,regenerate:e=>{a&&(d(!0),f(void 0),j({threadId:e.threadId,userMessageId:e.userMessageId,assistantMessageId:e.assistantMessageId}).then(t=>{var n;(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.deleteThreadMessagePair)&&N(e.userMessage,e.threadRunOptions)}).catch(e=>{}))}}}({threadId:eS,onAssistantMessageCompleted:(e,t)=>{(null==t?void 0:t.threadUserMessageCreated)&&t.threadAssistantMessageCreated&&ez(t.threadUserMessageCreated,t.threadAssistantMessageCreated),e&&!eS&&eT(e)}}),e$=(0,b.d)(eL),{isCopied:eX,copyToClipboard:eH}=(0,J.m)({timeout:2e3}),eY=(0,r.useMemo)(()=>x.find(e=>e.id===eb),[eb,x]),eF=(0,r.useMemo)(()=>eY?(0,H.Z)(null==eY?void 0:eY.attachment,"doc","code"):{answers:x.filter(e=>e.role===B.uU.Assistant).map(e=>(0,H.Z)(e,"doc","code"))},[eb,null==eY?void 0:null===(e=eY.attachment)||void 0===e?void 0:e.code,null==eY?void 0:null===(t=eY.attachment)||void 0===t?void 0:t.doc]);(0,r.useEffect)(()=>{c(i),u||m(!0)},[i]),(0,r.useEffect)(()=>{u&&(()=>{if(ep.current)return;ep.current=!0;let e=sessionStorage.getItem(g.$6.SEARCH_INITIAL_MSG),t=sessionStorage.getItem(g.$6.SEARCH_INITIAL_EXTRA_CONTEXT),n=t?JSON.parse(t):void 0;if(e){sessionStorage.removeItem(g.$6.SEARCH_INITIAL_MSG),sessionStorage.removeItem(g.$6.SEARCH_INITIAL_EXTRA_CONTEXT),D(!0),X(e=>({...e,repository:null==n?void 0:n.repository})),eq(e,{repository:null==n?void 0:n.repository});return}eS||ef.replace("/")})()},[u]),(0,r.useEffect)(()=>{z&&setTimeout(()=>{ec(!0)},300)},[z]),(0,r.useEffect)(()=>{var e,t,n,s;if(!eP)return;let r=[...x],a=r.findIndex(e=>e.id===es);if(a<=0)return;let l=r[a];l.content=(null==eP?void 0:eP.threadAssistantMessageContentDelta)||"",l.attachment={code:null!==(n=null==eP?void 0:null===(e=eP.threadAssistantMessageAttachmentsCode)||void 0===e?void 0:e.map(e=>({...e.code,extra:{scores:e.scores}})))&&void 0!==n?n:[],doc:null!==(s=null==eP?void 0:null===(t=eP.threadAssistantMessageAttachmentsDoc)||void 0===t?void 0:t.map(e=>({...e.doc,extra:{score:e.score}})))&&void 0!==s?s:[]},l.threadRelevantQuestions=null==eP?void 0:eP.threadRelevantQuestions,C(r)},[eL,eP]),(0,r.useEffect)(()=>{if(eO){let e=[...x],t=e.find(e=>e.id===es);t&&(t.error="401"===eO.message?"Unauthorized":"Fail to fetch")}},[eO]);let eV=(0,r.useRef)();(0,r.useEffect)(()=>(e$.current&&(eV.current=window.setTimeout(()=>{var e,t;if(!e$.current)return;R(!0);let n=null==ea?void 0:null===(t=ea.current)||void 0===t?void 0:null===(e=t.children)||void 0===e?void 0:e[1];if(n){let e=es===x[x.length-1].id;e&&n.scrollTo({top:n.scrollHeight,behavior:"smooth"})}},300)),e$.current||R(!1),()=>{window.clearTimeout(eV.current)}),[eL]),(0,r.useEffect)(()=>{var e,t,n;ev?(null===(e=ey.current)||void 0===e||e.expand(),null===(t=ey.current)||void 0===t||t.resize(ew)):null===(n=ey.current)||void 0===n||n.collapse()},[ev]);let eq=(e,t)=>{let n=(0,h.x0)(),s=(0,h.x0)(),r={id:n,role:B.uU.User,content:e},a={id:s,role:B.uU.Assistant,content:""},l=(null==t?void 0:t.repository)||(null==$?void 0:$.repository),o=l?{gitUrl:l.gitUrl,content:e}:null;q(n),er(s),C([...x].concat([r,a])),eD({content:e},{generateRelevantQuestions:!0,codeQuery:o,docQuery:{content:e}})};if(!z&&eE)return(0,s.jsxs)("div",{className:"mx-auto mt-24 w-full space-y-10 px-4 pb-32 lg:max-w-4xl lg:px-0",children:[(0,s.jsx)(ei,{}),(0,s.jsx)(ei,{})]});if(!p.value||!f||!z)return(0,s.jsx)(s.Fragment,{});let eB=em?{height:"calc(100vh - ".concat(T.wt,")")}:{height:"100vh"};return(0,s.jsx)(ed.Provider,{value:{isLoading:eL,onRegenerateResponse:()=>{if(!eS)return;let e=x.length-1,t=e-1;if(-1===e||t<=-1)return;let n=x[t].id,s=x[e].id,r=x.slice(0,-2),a=x[t],l={...a,id:(0,h.x0)()},o={id:(0,h.x0)(),role:B.uU.Assistant,content:""},i=null==$?void 0:$.repository,d=i?{gitUrl:i.gitUrl,content:l.content}:null;q(l.id),er(o.id),C(r.concat([l,o])),eZ({threadId:eS,userMessageId:n,assistantMessageId:s,userMessage:{content:l.content},threadRunOptions:{generateRelevantQuestions:!0,codeQuery:d,docQuery:{content:l.content}}})},onSubmitSearch:eq,extraRequestContext:$,repositoryList:eI,setDevPanelOpen:ej,setConversationIdForDev:eN,isPathnameInitialized:u},children:(0,s.jsx)("div",{className:"transition-all",style:eB,children:(0,s.jsxs)(A.pO,{direction:"vertical",onLayout:e=>{(null==e?void 0:e[1])&&eC(e[1])},children:[(0,s.jsxs)(A.ee,{children:[(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between px-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-x-6",children:(0,s.jsxs)(w.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>ef.replace("/"),children:[(0,s.jsx)(S.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!!eS&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal text-muted-foreground",onClick:()=>ef.push("/"),children:(0,s.jsx)(S.IconPlus,{})}),(0,s.jsx)(w.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal text-muted-foreground",onClick:()=>{eX||eH(window.location.href)},children:eX?(0,s.jsx)(S.IconCheck,{className:"text-green-600"}):(0,s.jsx)(S.IconLink,{})})]}),(0,s.jsx)(E.q,{children:(0,s.jsx)(O.T,{})}),(0,s.jsx)("div",{className:"ml-2",children:(0,s.jsx)(U.Z,{showHome:!1,showSetting:!0,children:(0,s.jsx)(P.Y,{className:"h-10 w-10 border"})})})]})]}),(0,s.jsxs)("main",{className:"h-[calc(100%-4rem)] overflow-auto pb-8 lg:pb-0",children:[(0,s.jsx)(I.ScrollArea,{className:"h-full",ref:ea,children:(0,s.jsx)("div",{className:"mx-auto px-4 pb-32 lg:max-w-4xl lg:px-0",children:(0,s.jsx)("div",{className:"flex flex-col",children:x.map((e,t)=>{if(e.role===B.uU.User)return(0,s.jsxs)("div",{children:[0!==t&&(0,s.jsx)(_.Z,{}),(0,s.jsx)("div",{className:"pb-2 pt-8",children:(0,s.jsx)(eg,{message:e.content,headline:!0})})]},e.id+t);if(e.role===B.uU.Assistant){let n=t===x.length-1;return(0,s.jsx)("div",{className:"pb-8 pt-2",children:(0,s.jsx)(eh,{answer:e,isLastAssistantMessage:n,showRelatedQuestion:n,isLoading:eL&&n})},e.id+t)}return(0,s.jsx)(s.Fragment,{})})})})}),(0,s.jsx)(M.K,{className:(0,y.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]",{hidden:ev}),container:null===(a=ea.current)||void 0===a?void 0:null===(n=a.children)||void 0===n?void 0:n[1],offset:100,style:"dark"===ex?{"--background":"0 0% 12%"}:{}}),(0,s.jsxs)("div",{className:(0,y.cn)("fixed bottom-5 left-0 z-30 flex min-h-[5rem] w-full flex-col items-center gap-y-2",{"opacity-100 translate-y-0":el,"opacity-0 translate-y-10":!el,hidden:ev}),style:Object.assign({transition:"all 0.35s ease-out"},"dark"===ex?{"--background":"0 0% 12%"}:{}),children:[(0,s.jsxs)(w.z,{className:(0,y.cn)("bg-background",{"opacity-0 pointer-events-none":!k,"opacity-100":k}),style:{transition:"opacity 0.55s ease-out"},variant:"outline",onClick:()=>eU(),children:[(0,s.jsx)(S.IconStop,{className:"mr-2"}),"Stop generating"]}),(0,s.jsx)("div",{className:(0,y.cn)("relative z-20 flex justify-center self-stretch px-4"),children:(0,s.jsx)(L.Z,{onSearch:eq,className:"lg:max-w-4xl",placeholder:"Ask a follow up question",isLoading:eL,isFollowup:!0,extraContext:$})})]})]})]}),(0,s.jsx)(A.Dp,{className:(0,y.cn)("hidden !h-[4px] border-none bg-background shadow-[0px_-4px_4px_rgba(0,0,0,0.2)] hover:bg-blue-500 active:bg-blue-500 dark:shadow-[0px_-4px_4px_rgba(255,255,255,0.2)]",ev&&"block")}),(0,s.jsx)(A.ee,{collapsible:!0,collapsedSize:0,defaultSize:0,ref:ey,onCollapse:()=>ej(!1),className:"z-50",children:(0,s.jsx)(eo,{onClose:()=>ej(!1),value:eF,isFullScreen:100===ew,onToggleFullScreen:e=>{var t;let n=ek.current;e?n=100:100===n&&(n=45),null===(t=ey.current)||void 0===t||t.resize(n),eC(n),ek.current=ew}})})]})})})}let ef=(0,r.createContext)({});function eh(e){var t,n,a,l,o,i;let{answer:d,showRelatedQuestion:c,isLoading:u,isLastAssistantMessage:m}=e,{onRegenerateResponse:f,onSubmitSearch:h,setDevPanelOpen:p,setConversationIdForDev:x}=(0,r.useContext)(ed),[g]=(0,v.m3)(),[j,b]=(0,r.useState)(!1),[N,C]=(0,r.useState)(void 0),k=u?S.IconSpinner:S.IconSparkles,A=(null===(n=d.attachment)||void 0===n?void 0:null===(t=n.doc)||void 0===t?void 0:t.length)?Math.ceil(d.attachment.doc.length/4)*ec.expand+.5*Math.floor(d.attachment.doc.length/4):0,I=(0,r.useMemo)(()=>{var e,t,n;return null!==(n=null==d?void 0:null===(t=d.attachment)||void 0===t?void 0:null===(e=t.code)||void 0===e?void 0:e.map(e=>{var t,n;let s=null!==(n=null==e?void 0:e.startLine)&&void 0!==n?n:0,r=e.content.split("\n").length;return{kind:"file",range:{start:s,end:s+r-1},filepath:e.filepath,content:e.content,git_url:e.gitUrl,extra:{scores:null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.scores}}}))&&void 0!==n?n:[]},[null==d?void 0:null===(a=d.attachment)||void 0===a?void 0:a.code]),_=null==d?void 0:null===(l=d.attachment)||void 0===l?void 0:l.doc,M=null==d?void 0:null===(o=d.attachment)||void 0===o?void 0:o.code;return(0,s.jsx)(ef.Provider,{value:{onCodeCitationClick:e=>{},onCodeCitationMouseEnter:e=>{var t,n;C(e-1-((null==d?void 0:null===(n=d.attachment)||void 0===n?void 0:null===(t=n.doc)||void 0===t?void 0:t.length)||0))},onCodeCitationMouseLeave:e=>{C(void 0)}},children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-5",children:[_&&_.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-x-2",children:[(0,s.jsx)(S.IconBlocks,{className:"relative",style:{top:"-0.04rem"}}),(0,s.jsx)("p",{className:"text-sm font-bold leading-normal",children:"Sources"})]}),(0,s.jsx)("div",{className:"gap-sm grid grid-cols-3 gap-2 overflow-hidden md:grid-cols-4",style:{transition:"height 0.25s ease-out",height:j?"".concat(A,"rem"):"".concat(ec.compress,"rem")},children:_.map((e,t)=>(0,s.jsx)(ex,{conversationId:d.id,source:e,showMore:j,showDevTooltip:g.value},e.link+t))}),(0,s.jsxs)(w.z,{variant:"ghost",className:"-ml-1.5 mt-1 flex items-center gap-x-1 px-1 py-2 text-sm font-normal text-muted-foreground",onClick:()=>b(!j),children:[(0,s.jsx)(S.IconChevronRight,{className:(0,y.cn)({"-rotate-90":j,"rotate-90":!j})}),(0,s.jsx)("p",{children:j?"Show less":"Show more"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-x-1.5",children:[(0,s.jsx)(k,{className:(0,y.cn)({"animate-spinner":u})}),(0,s.jsx)("p",{className:"text-sm font-bold leading-none",children:"Answer"}),g.value&&(0,s.jsx)(w.z,{variant:"ghost",size:"icon",onClick:()=>{x(d.id),p(!0)},children:(0,s.jsx)(S.IconBug,{})})]}),M&&M.length>0&&(0,s.jsx)(er.q,{contexts:I,className:"mt-1 text-sm",onContextClick:e=>{if(!e.filepath)return;let t=new URL("".concat(window.location.origin,"/files")),n=new URLSearchParams;n.append("redirect_filepath",e.filepath),n.append("redirect_git_url",e.git_url),t.search=n.toString();let s=(0,y.nO)({start:e.range.start,end:e.range.end});s&&(t.hash=s),window.open(t.toString())},defaultOpen:!0,enableTooltip:g.value,onTooltipClick:()=>{x(d.id),p(!0)},highlightIndex:N}),u&&!d.content&&(0,s.jsx)(R.O,{className:"mt-1 h-40 w-full"}),(0,s.jsx)(eg,{message:d.content,relevantDocuments:_,relevantCode:M}),d.error&&(0,s.jsx)(eN,{error:d.error}),!u&&(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-x-3 text-sm",children:[(0,s.jsx)(z.q,{className:"-ml-1.5 gap-x-1 px-1 font-normal text-muted-foreground",value:(e=>{var t,n;if((0,$.Z)(null==e?void 0:null===(t=e.attachment)||void 0===t?void 0:t.doc))return e.content;let s=e.content.replace(/\[\[?citation:\s*\d+\]?\]/g,e=>{let t=null==e?void 0:e.match(/\d+/);return"[".concat(t,"]")}).trim(),r=null===(n=e.attachment)||void 0===n?void 0:n.doc.map((e,t)=>"[".concat(t+1,"] ").concat(e.link)).join("\n");return"".concat(s,"\n\nCitations:\n").concat(r)})(d),text:"Copy"}),!u&&m&&(0,s.jsxs)(w.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>f(d.id),children:[(0,s.jsx)(S.IconRefresh,{}),(0,s.jsx)("p",{children:"Regenerate"})]})]})]}),c&&!u&&d.threadRelevantQuestions&&d.threadRelevantQuestions.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,s.jsx)(S.IconLayers,{}),(0,s.jsx)("p",{className:"text-sm font-bold leading-none",children:"Suggestions"})]}),(0,s.jsx)("div",{className:"mt-2 flex flex-col gap-y-3",children:null===(i=d.threadRelevantQuestions)||void 0===i?void 0:i.map((e,t)=>(0,s.jsxs)("div",{className:"flex cursor-pointer items-center justify-between rounded-lg border p-4 py-3 transition-opacity hover:opacity-70",onClick:h.bind(null,e),children:[(0,s.jsx)("p",{className:"w-full overflow-hidden text-ellipsis text-sm",children:e}),(0,s.jsx)(S.IconPlus,{})]},t))})]})]})})}let ep=e=>{let t=c().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=f.TU.parse(t),s=m().decode(n),r=s.replace(/<\/?[^>]+(>|$)/g,"");return r};function ex(e){var t,n;let{conversationId:a,source:l,showMore:o,showDevTooltip:i}=e,{setDevPanelOpen:d,setConversationIdForDev:c}=(0,r.useContext)(ed),{hostname:u}=new URL(l.link),[m,f]=(0,r.useState)(!1);return(0,s.jsxs)(es.u,{open:m,onOpenChange:e=>{i&&f(e)},delayDuration:0,children:[(0,s.jsx)(es.aJ,{asChild:!0,children:(0,s.jsx)("div",{className:"flex cursor-pointer flex-col justify-between rounded-lg border bg-card p-3 hover:bg-card/60",style:{height:o?"".concat(ec.expand,"rem"):"".concat(ec.compress,"rem"),transition:"all 0.25s ease-out"},onClick:()=>window.open(l.link),children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,s.jsx)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:l.title}),(0,s.jsx)("p",{className:(0,y.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",{"line-clamp-2":o,"line-clamp-1":!o}),children:ep(l.content)})]}),(0,s.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,s.jsxs)("div",{className:"flex w-full flex-1 items-center",children:[(0,s.jsx)(eb,{hostname:u}),(0,s.jsx)("p",{className:"ml-1 overflow-hidden text-ellipsis",children:u.replace("www.","").split("/")[0]})]})})]})})}),(0,s.jsx)(es._v,{align:"start",className:"cursor-pointer p-2",onClick:e=>{e.stopPropagation(),c(a),d(!0)},children:(0,s.jsxs)("p",{children:["Score: ",null!==(n=null==l?void 0:null===(t=l.extra)||void 0===t?void 0:t.score)&&void 0!==n?n:"-"]})})]})}function eg(e){let{message:t,headline:n=!1,relevantDocuments:a,relevantCode:l}=e,o=(0,r.useMemo)(()=>{var e,t;let n=null!==(e=null==a?void 0:a.map(e=>({type:"doc",data:e})))&&void 0!==e?e:[],s=null!==(t=null==l?void 0:l.map(e=>({type:"code",data:e})))&&void 0!==t?t:[];return(0,Z.Z)([...n,...s])},[a,l]),i=(e,t)=>{let n=/\[\[?citation:\s*\d+\]?\]/g,r=e.split(n),a=e.match(n);return(0,s.jsx)("span",{children:r.map((e,t)=>{let n=null==a?void 0:a[t],r=null==n?void 0:n.match(/\d+/),l=r?parseInt(r[0],10):null,i=(0,X.Z)(l)?void 0:null==o?void 0:o[l-1],d=null==i?void 0:i.type,c=i&&!(0,X.Z)(l);return(0,s.jsxs)("span",{children:[e&&(0,s.jsx)("span",{children:e}),c&&(0,s.jsx)(s.Fragment,{children:"doc"===d?(0,s.jsx)(ev,{relevantDocument:i.data,citationIndex:l}):"code"===d?(0,s.jsx)(ej,{relevantCode:i.data,citationIndex:l}):null})]},t)})},t)};return(0,s.jsx)(D.s,{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[p.Z,x.Z],components:{p(e){let{children:t}=e;return n?(0,s.jsx)("h3",{className:"break-anywhere cursor-text scroll-m-20 text-xl font-semibold tracking-tight",children:t}):t.length?(0,s.jsx)("div",{className:"mb-2 inline-block leading-relaxed last:mb-0",children:t.map((e,t)=>"string"==typeof e?i(e,t):(0,s.jsx)("span",{children:e},t))}):(0,s.jsx)("p",{className:"mb-2 last:mb-0",children:t})},li(e){let{children:t}=e;return t&&t.length?(0,s.jsx)("li",{children:t.map((e,t)=>"string"==typeof e?i(e,t):(0,s.jsx)("span",{children:e},t))}):(0,s.jsx)("li",{children:t})},code(e){let{node:t,inline:n,className:r,children:a,...l}=e;if(a.length){if("▍"==a[0])return(0,s.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});a[0]=a[0].replace("`▍`","▍")}let o=/language-(\w+)/.exec(r||"");return n?(0,s.jsx)("code",{className:r,...l,children:a}):(0,s.jsx)(C.dn,{language:o&&o[1]||"",value:String(a).replace(/\n$/,""),...l},Math.random())}},children:t})}function ev(e){let{relevantDocument:t,citationIndex:n}=e,r=t?new URL(t.link):null;return(0,s.jsxs)(k.zs,{children:[(0,s.jsx)(k.Yi,{children:(0,s.jsx)("span",{className:"relative -top-2 mr-0.5 inline-block h-4 w-4 cursor-pointer rounded-full bg-muted text-center text-xs",onClick:()=>window.open(t.link),children:n})}),(0,s.jsx)(k.bZ,{className:"w-96 text-sm",children:(0,s.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,s.jsxs)("div",{className:"m-0 flex items-center space-x-1 text-xs leading-none text-muted-foreground",children:[(0,s.jsx)(eb,{hostname:r.hostname,className:"m-0 mr-1 leading-none"}),(0,s.jsx)("p",{className:"m-0 leading-none",children:r.hostname})]}),(0,s.jsx)("p",{className:"m-0 cursor-pointer font-bold leading-none transition-opacity hover:opacity-70",onClick:()=>window.open(t.link),children:t.title}),(0,s.jsx)("p",{className:"m-0 line-clamp-4 leading-none",children:ep(t.content)})]})})]})}function ej(e){let{relevantCode:t,citationIndex:n}=e,{onCodeCitationClick:a,onCodeCitationMouseEnter:l,onCodeCitationMouseLeave:o}=(0,r.useContext)(ef);return(0,s.jsx)("span",{className:"relative -top-2 mr-0.5 inline-block h-4 w-4 cursor-pointer rounded-full bg-muted text-center text-xs",onClick:()=>{null==a||a(t)},onMouseEnter:()=>{null==l||l(n)},onMouseLeave:()=>{null==o||o(n)},children:n})}function eb(e){let{hostname:t,className:n}=e,[a,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"relative h-3.5 w-3.5",children:[(0,s.jsx)(l(),{src:i,alt:t,width:14,height:14,className:(0,y.cn)("absolute left-0 top-0 z-0 h-3.5 w-3.5 rounded-full leading-none",n)}),(0,s.jsx)(l(),{src:"https://s2.googleusercontent.com/s2/favicons?sz=128&domain_url=".concat(t),alt:t,width:14,height:14,className:(0,y.cn)("relative z-10 h-3.5 w-3.5 rounded-full bg-card leading-none",n,{"opacity-0":!a}),onLoad:()=>{o(!0)}})]})}function eN(e){let{error:t="Fail to fetch"}=e,n=(0,r.useMemo)(()=>"```\n"+JSON.stringify({error:!0,message:t},null,2)+"\n```",[t]);return(0,s.jsx)(D.s,{className:"prose-full-width prose break-words text-sm dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[p.Z,x.Z],components:{code(e){let{node:t,inline:n,className:r,children:a,...l}=e;return(0,s.jsx)("div",{...l,className:(0,y.cn)(r,"bg-zinc-950 p-2"),children:a})}},children:n})}},68172:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var s=n(36164),r=n(38785);function a(e){let{children:t,fallback:n=null}=e;return(0,r.U)()?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(s.Fragment,{children:n})}},30601:function(e,t,n){"use strict";n.d(t,{Hb:function(){return f},wt:function(){return c},xc:function(){return h},yo:function(){return m}});var s=n(36164),r=n(3546),a=n(74630),l=n(36327),o=n(80605),i=n(74248),d=n(81565);let c="3.5rem",u=r.createContext({}),m=e=>{let{children:t}=e,n=(0,o.UA)(),[l,i]=r.useState(!1);return r.useEffect(()=>{let e=window.self!==window.top;e||(0,a.Z)(n)||i(n)},[n]),(0,s.jsx)(u.Provider,{value:{isShowDemoBanner:l,setIsShowDemoBanner:i},children:t})};function f(){let{isShowDemoBanner:e,setIsShowDemoBanner:t}=r.useContext(u);return[e,t]}function h(){let[e,t]=f(),{data:n}=(0,l.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,s.jsxs)("div",{className:(0,i.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:c}:{height:0},children:[(0,s.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,s.jsx)("span",{children:"\uD83D\uDCC6"}),(0,s.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,s.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,s.jsx)(d.IconGithub,{}),(0,s.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,s.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,s.jsxs)("div",{className:(0,i.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":n,"h-0 opacity-0":!n}),children:[(0,s.jsx)(d.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,s.jsx)("span",{children:null==n?void 0:n.stargazers_count}),(0,s.jsx)(d.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,s.jsx)("span",{children:null==n?void 0:n.forks_count})]})]})]}),(0,s.jsx)(d.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>t(!1)})]})]})}},94529:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var s=n(36164),r=n(3546),a=n(70652),l=n.n(a),o=n(2899),i=n(23455),d=n(40055),c=n(21808),u=n(9010),m=n(70410),f=n(74248),h=n(36065),p=n(84942),x=n(29),g=n(31458),v=n(81565);function j(e){let{onSearch:t,className:n,placeholder:a,showBetaBadge:l,isLoading:o,autoFocus:d,loadingWithSpinning:m,cleanAfterSearch:h=!0,isFollowup:p,extraContext:g}=e,[j,N]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),[C,k]=(0,r.useState)(""),[S,A]=(0,r.useState)(),{theme:I}=(0,u.X)(),_=(0,r.useRef)(null),R=()=>{try{let e=sessionStorage.getItem(c.$6.SEARCH_SELECTED_REPO);if(e){let t=JSON.parse(e);t&&A(t)}}catch(e){}};(0,r.useEffect)(()=>{N(!0),R()},[]);let M=e=>{C&&!o&&(null==e||e.stopPropagation(),t(C,{repository:S}),h&&k(""))};(0,r.useEffect)(()=>{(null==g?void 0:g.repository)&&A(null==g?void 0:g.repository)},[g]);let E=!p||!!(null==g?void 0:g.repository);return(0,s.jsxs)("div",{className:(0,f.cn)("relative overflow-hidden rounded-lg border border-muted-foreground bg-background px-4 transition-all hover:border-muted-foreground/60",{"flex-col gap-1 w-full":E,"flex w-full items-center ":!E,"!border-zinc-400":y&&p&&"dark"!==I,"!border-primary":y&&(!p||"dark"===I),"py-0":l,"border-2 dark:border border-zinc-400 hover:border-zinc-400/60 dark:border-muted-foreground dark:hover:border-muted-foreground/60":p},n),onClick:()=>{if(p){var e;null===(e=_.current)||void 0===e||e.focus()}},children:[l&&(0,s.jsxs)(x.u,{delayDuration:0,children:[(0,s.jsx)(x.aJ,{asChild:!0,children:(0,s.jsx)("span",{className:"absolute -right-8 top-1 mr-3 rotate-45 rounded-none border-none py-0.5 pl-6 pr-5 text-xs text-primary",style:{background:"dark"===I?"#333":"#e8e1d3"},children:"Beta"})}),(0,s.jsx)(x._v,{sideOffset:-8,className:"max-w-md",children:(0,s.jsx)("p",{children:"Please note that the answer engine is still in its early stages, and certain functionalities, such as finding the correct code context and the quality of summarizations, still have room for improvement. If you encounter an issue and believe it can be enhanced, consider sharing it in our Slack community!"})})]}),(0,s.jsx)(i.Z,{className:(0,f.cn)("text-area-autosize mr-1 w-full flex-1 resize-none rounded-lg !border-none bg-transparent !shadow-none !outline-none !ring-0 !ring-offset-0",{"!h-[48px]":!j,"pt-4":!l,"pt-5":l,"pb-4":!E&&!l,"pb-5":!E&&l}),placeholder:a||"Ask anything...",maxRows:5,onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey)return e.preventDefault()},onKeyUp:e=>{if("Enter"===e.key&&!e.shiftKey)return M()},onFocus:()=>w(!0),onBlur:()=>w(!1),onChange:e=>k(e.target.value),value:C,autoFocus:d,minRows:p?1:2,ref:_}),(0,s.jsxs)("div",{className:(0,f.cn)("flex items-center justify-between gap-2",{"pb-2":E}),children:[E&&(0,s.jsx)(b,{className:"overflow-hidden",value:S,onChange:A,disabled:p}),(0,s.jsxs)("div",{className:(0,f.cn)("flex items-center justify-center rounded-lg p-1 transition-all",{"bg-primary text-primary-foreground cursor-pointer":C.length>0,"!bg-muted !text-primary !cursor-default":o||0===C.length,"mr-1.5":!l,"h-6 w-6":!p}),onClick:M,children:[m&&o&&(0,s.jsx)(v.IconSpinner,{className:"h-3.5 w-3.5"}),(!m||!o)&&(0,s.jsx)(v.IconArrowRight,{className:"h-3.5 w-3.5"})]})]})]})}function b(e){var t;let{value:n,onChange:a,className:i,disabled:u}=e,[j,b]=(0,r.useState)(!1),[{data:N,fetching:y}]=(0,d.aM)({query:m.zz}),w=null==N?void 0:N.repositoryList,C=(0,r.useMemo)(()=>(null==w?void 0:w.length)?"No results found":(0,s.jsxs)("div",{className:"space-y-4 py-2",children:[(0,s.jsx)("p",{className:"font-semibold",children:"No repositories"}),(0,s.jsxs)(l(),{href:"/settings/providers/git",className:(0,f.cn)((0,g.d)({size:"sm"}),"gap-1"),children:["Connect",(0,s.jsx)(v.IconArrowRight,{})]})]}),[w]),k=e=>{a(e),b(!1),sessionStorage.setItem(c.$6.SEARCH_SELECTED_REPO,JSON.stringify((0,o.Z)(e,"refs")))};return(0,s.jsxs)(x.u,{delayDuration:0,children:[(0,s.jsxs)(p.J2,{open:j,onOpenChange:e=>{u||b(e)},children:[(0,s.jsx)(p.xo,{asChild:!0,children:(0,s.jsx)(x.aJ,{asChild:!0,children:(0,s.jsx)("div",{className:(0,f.cn)((0,g.d)({variant:"ghost"}),"-ml-2 cursor-pointer rounded-full px-2",{"cursor-default hover:bg-transparent":u},i),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(v.IconCode,{className:(0,f.cn)("shrink-0",n?"text-foreground/70":"text-foreground/50")}),(0,s.jsx)("span",{className:(0,f.cn)("flex-1 truncate",n?"text-foreground/70":"text-foreground/50"),children:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:"Select repository"})]})})})}),(0,s.jsx)(p.i9,{children:(0,s.jsx)(p.yk,{className:"min-w-[300px] lg:max-w-[60vw]",align:"start",side:"bottom",children:(0,s.jsxs)(h.mY,{children:[(0,s.jsx)(h.sZ,{placeholder:"Search"}),(0,s.jsxs)(h.e8,{className:"max-h-[200px]",children:[(0,s.jsx)(h.rb,{children:y?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(v.IconSpinner,{className:"h-6 w-6"})}):C}),(0,s.jsx)(h.fu,{children:null==w?void 0:w.map(e=>{let t=!!(null==n?void 0:n.id)&&"".concat(e.kind,"_").concat(e.id)==="".concat(n.kind,"_").concat(n.id);return(0,s.jsxs)(h.di,{value:"".concat(e.kind,"_").concat(e.id),onSelect:()=>k(e),className:"flex cursor-pointer items-center gap-2 overflow-hidden",children:[(0,s.jsx)("div",{className:"h-4 w-4 shrink-0",children:t&&(0,s.jsx)(v.IconCheck,{className:"shrink-0"})}),(0,s.jsx)("span",{className:"truncate",children:e.name})]},"".concat(e.kind,"_").concat(e.id))})})]}),!!n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.zz,{}),(0,s.jsx)(h.di,{onSelect:()=>{a(void 0),b(!1),sessionStorage.removeItem(c.$6.SEARCH_SELECTED_REPO)},className:"!pointer-events-auto mt-1 cursor-pointer justify-center text-center !opacity-100",children:"Clear"})]})]})})})]}),(0,s.jsx)(x._v,{className:"max-w-md",children:"Effortlessly interact with your repositories for contextualized search and assistance."})]})}},63743:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var s=n(36164),r=n(3546),a=n(9010),l=n(31458),o=n(81565);function i(e){let{className:t}=e,{setTheme:n,theme:i}=(0,a.X)(),[d,c]=r.useTransition();return(0,s.jsxs)(l.z,{variant:"ghost",size:"icon",onClick:()=>{c(()=>{n("light"===i?"dark":"light")})},className:t,children:["dark"===i?(0,s.jsx)(o.IconMoon,{className:"transition-all"}):(0,s.jsx)(o.IconSun,{className:"transition-all"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}},36065:function(e,t,n){"use strict";n.d(t,{di:function(){return h},e8:function(){return c},fu:function(){return m},mY:function(){return i},rb:function(){return u},sZ:function(){return d},zz:function(){return f}});var s=n(36164),r=n(3546),a=n(53241),l=n(93170),o=n(74248);n(30220);let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.mY,{ref:t,className:(0,o.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...r})});i.displayName=a.mY.displayName;let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(a.mY.Input,{ref:t,className:(0,o.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...r})]})});d.displayName=a.mY.Input.displayName;let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.mY.List,{ref:t,className:(0,o.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...r})});c.displayName=a.mY.List.displayName;let u=r.forwardRef((e,t)=>(0,s.jsx)(a.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=a.mY.Empty.displayName;let m=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.mY.Group,{ref:t,className:(0,o.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...r})});m.displayName=a.mY.Group.displayName;let f=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.mY.Separator,{ref:t,className:(0,o.cn)("-mx-1 h-px bg-border",n),...r})});f.displayName=a.mY.Separator.displayName;let h=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.mY.Item,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",n),...r})});h.displayName=a.mY.Item.displayName},30220:function(e,t,n){"use strict";n.d(t,{$N:function(){return p},Be:function(){return x},Vq:function(){return i},cN:function(){return h},cZ:function(){return m},fK:function(){return f},hg:function(){return d}});var s=n(36164),r=n(3546),a=n(4318),l=n(1663),o=n(74248);let i=a.fC,d=a.xz,c=a.h_;a.x8;let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r})});u.displayName=a.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:n,children:r,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(a.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i,children:[r,(0,s.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=a.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};f.displayName="DialogHeader";let h=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})});p.displayName=a.Dx.displayName;let x=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...r})});x.displayName=a.dk.displayName},62202:function(e,t,n){"use strict";n.d(t,{$F:function(){return i},AW:function(){return c},Ju:function(){return m},VD:function(){return f},Xi:function(){return u},h_:function(){return o}});var s=n(36164),r=n(3546),a=n(19148),l=n(74248);let o=a.fC,i=a.xz;a.ZA,a.Uv,a.Tr,a.Ee;let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...r})});d.displayName=a.tu.displayName;let c=r.forwardRef((e,t)=>{let{className:n,sideOffset:r=4,...o}=e;return(0,s.jsx)(a.Uv,{children:(0,s.jsx)(a.VY,{ref:t,sideOffset:r,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})})});c.displayName=a.VY.displayName;let u=r.forwardRef((e,t)=>{let{className:n,inset:r,...o}=e;return(0,s.jsx)(a.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",n),...o})});u.displayName=a.ck.displayName;let m=r.forwardRef((e,t)=>{let{className:n,inset:r,...o}=e;return(0,s.jsx)(a.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",n),...o})});m.displayName=a.__.displayName;let f=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",n),...r})});f.displayName=a.Z0.displayName},90615:function(e,t,n){"use strict";n.d(t,{Yi:function(){return i},bZ:function(){return d},zs:function(){return o}});var s=n(36164),r=n(3546),a=n(38421),l=n(74248);let o=a.fC,i=a.xz,d=r.forwardRef((e,t)=>{let{className:n,align:r="center",sideOffset:o=4,...i}=e;return(0,s.jsx)(a.VY,{ref:t,align:r,sideOffset:o,className:(0,l.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...i})});d.displayName=a.VY.displayName},53538:function(e,t,n){"use strict";n.d(t,{Dp:function(){return i},ee:function(){return o},pO:function(){return l}});var s=n(36164),r=n(6618),a=n(74248);let l=e=>{let{className:t,...n}=e;return(0,s.jsx)(r.eh,{className:(0,a.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},o=r.s_,i=e=>{let{withHandle:t,className:n,...l}=e;return(0,s.jsx)(r.OT,{className:(0,a.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...l,children:t&&(0,s.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})}},57830:function(e,t,n){"use strict";n.r(t),n.d(t,{ScrollArea:function(){return o},ScrollBar:function(){return i}});var s=n(36164),r=n(3546),a=n(50778),l=n(74248);let o=r.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,s.jsxs)(a.fC,{ref:t,className:(0,l.cn)("relative overflow-hidden",n),...o,children:[(0,s.jsx)(a.l_,{className:"h-full w-full rounded-[inherit] [&>div]:!block",children:r}),(0,s.jsx)(i,{}),(0,s.jsx)(a.Ns,{})]})});o.displayName=a.fC.displayName;let i=r.forwardRef((e,t)=>{let{className:n,orientation:r="vertical",...o}=e;return(0,s.jsx)(a.gb,{ref:t,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...o,children:(0,s.jsx)(a.q4,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=a.gb.displayName},7449:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var s=n(36164),r=n(3546),a=n(11978),l=n(98454),o=n(80605),i=n(91302),d=n(62202),c=n(81565);function u(e){let{children:t,showHome:n=!0,showSetting:u=!1}=e,m=(0,a.useRouter)(),f=(0,i.QJ)(),[{data:h}]=(0,l.P)(),p=null==h?void 0:h.me;(0,o.xG)();let[x,g]=r.useState(!1),v=async e=>{e.preventDefault(),g(!0),await f(),g(!1)};if(p)return(0,s.jsxs)(d.h_,{children:[(0,s.jsx)(d.$F,{children:t}),(0,s.jsxs)(d.AW,{collisionPadding:{right:16},children:[p.name&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Ju,{className:"pb-0.5",children:p.name}),(0,s.jsx)(d.Ju,{className:"pb-1 pt-0 text-sm font-normal text-muted-foreground",children:p.email})]}),!p.name&&(0,s.jsx)(d.Ju,{children:p.email}),(0,s.jsx)(d.VD,{}),n&&(0,s.jsxs)(d.Xi,{onClick:()=>m.push("/"),className:"cursor-pointer",children:[(0,s.jsx)(c.IconHome,{}),(0,s.jsx)("span",{className:"ml-2",children:"Home"})]}),u&&(0,s.jsxs)(d.Xi,{onClick:()=>m.push("/profile"),className:"cursor-pointer",children:[(0,s.jsx)(c.IconGear,{}),(0,s.jsx)("span",{className:"ml-2",children:"Settings"})]}),(0,s.jsxs)(d.Xi,{onClick:()=>window.open("/files"),className:"cursor-pointer",children:[(0,s.jsx)(c.IconCode,{}),(0,s.jsx)("span",{className:"ml-2",children:"Code Browser"})]}),(0,s.jsxs)(d.Xi,{onClick:()=>window.open("/api"),className:"cursor-pointer",children:[(0,s.jsx)(c.IconBackpack,{}),(0,s.jsx)("span",{className:"ml-2",children:"API Docs"})]}),(0,s.jsx)(d.VD,{}),(0,s.jsxs)(d.Xi,{disabled:x,onClick:v,className:"cursor-pointer",children:[(0,s.jsx)(c.IconLogout,{}),(0,s.jsx)("span",{className:"ml-2",children:"Sign out"}),x&&(0,s.jsx)(c.IconSpinner,{className:"ml-1"})]})]})]})}},21808:function(e,t,n){"use strict";n.d(t,{$6:function(){return a},L8:function(){return r},o0:function(){return s}});let s="name@yourcompany.com",r=20,a={DEMO_AUTO_LOGIN:"_tabby_demo_autologin",SEARCH_INITIAL_MSG:"_tabby_search_initial_msg",SEARCH_INITIAL_EXTRA_CONTEXT:"_tabby_search_initial_extra_context",SEARCH_SELECTED_REPO:"_tabby_search_selected_repo"}},93877:function(e,t,n){"use strict";n.d(t,{BT:function(){return i},Ds:function(){return d},Ot:function(){return u},m3:function(){return f}});var s=n(3546);let r=(e,t)=>{let[n,r]=(0,s.useState)(t),[a,l]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let t=localStorage.getItem(e);t&&r(JSON.parse(t)),l(!1)},[]),[n,t=>{r(t),localStorage.setItem(e,JSON.stringify(t))},a]};class a{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,s){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=s}}class l{defineGlobalVar(){return new a(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=r(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,s){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=s&&s}}let o=new l("enable_code_browser_quick_action_bar","Quick Action Bar","Enable Quick Action Bar to display a convenient toolbar when you select code, offering options to explain the code, add unit tests, and more.",!0),i=o.defineGlobalVar(),d=o.defineHook(),c=new l("enable_search","Search","Enable the search on the home page to search for anything you want to know using the local chat model.",!0);c.defineGlobalVar();let u=c.defineHook(),m=new l("enable_developer_mode","Developer Mode","Enable the developer mode. The features involved include the Answer Engine.",!1);m.defineGlobalVar();let f=m.defineHook()},9010:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var s=n(28242);function r(){let{theme:e,systemTheme:t,setTheme:n}=(0,s.F)();return{theme:e&&"system"!==e?e:t||"light",setTheme:n,systemTheme:t}}},38785:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var s=n(3546);let r=!0;function a(){let[e,t]=s.useState(()=>!r);return s.useEffect(function(){r=!1,t(!0)},[]),e}},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(3546),r=n(11978);function a(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),n=(0,r.useSearchParams)(),a=(0,s.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,s]=e;return t.set(n,s)});let s=t.toString();return s.length>0?"?".concat(s):""},[n]),l=(0,s.useCallback)(s=>{let r=function(e,t,n){var s,r;let a=null===(s=n.searchParams)||void 0===s?void 0:s.set,l=null===(r=n.searchParams)||void 0===r?void 0:r.del,o=new URLSearchParams(t);a&&Object.entries(a).forEach(e=>{let[t,n]=e;return o.set(t,n)}),l&&(Array.isArray(l)?l.forEach(e=>o.delete(e)):o.delete(l));let i=o.toString(),d=e;return i.length>0&&(d+="?".concat(i)),n.hash&&(d+="#".concat(n.hash.replace(/^#/,""))),d}((null==s?void 0:s.pathname)||e,n,s);s.replace?t.replace(r):t.push(r)},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:a,updateUrlComponents:l}}},2489:function(){}},function(e){e.O(0,[7998,5498,1058,4007,530,7980,259,2578,816,1492,4421,7590,1454,5621,4546,8746,9275,4373,6379,4318,9148,778,5606,6193,4294,7982,5895,3865,9736,1565,6597,7517,3375,5289,1744],function(){return e(e.s=72845)}),_N_E=e.O()}]);